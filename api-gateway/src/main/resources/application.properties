server.port=8080
spring.application.name=api-gateway

# Eureka Client Configuration for AWS
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.client.service-url.defaultZone=http://discovery-server:8761/eureka
eureka.instance.prefer-ip-address=true
eureka.instance.hostname=${HOSTNAME}
eureka.instance.ip-address=${HOST_IP:0.0.0.0}

# Spring Cloud Gateway Configuration
spring.cloud.gateway.routes[0].id=users-service
spring.cloud.gateway.routes[0].uri=lb://users-service
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/users/**
spring.cloud.gateway.routes[0].predicates[1]=Path=/api/auth/**
spring.cloud.gateway.routes[0].predicates[2]=Path=/api/profile/**

spring.cloud.gateway.routes[1].id=product-service
spring.cloud.gateway.routes[1].uri=lb://product-service
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/products/**
spring.cloud.gateway.routes[1].predicates[1]=Path=/api/categories/**
spring.cloud.gateway.routes[1].predicates[2]=Path=/api/inventory/**

spring.cloud.gateway.routes[2].id=order-service
spring.cloud.gateway.routes[2].uri=lb://order-service
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/orders/**
spring.cloud.gateway.routes[2].predicates[1]=Path=/api/transactions/**
spring.cloud.gateway.routes[2].predicates[2]=Path=/api/procurement/**

spring.cloud.gateway.routes[3].id=notification-service
spring.cloud.gateway.routes[3].uri=lb://notification-service
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/notifications/**
spring.cloud.gateway.routes[3].predicates[1]=Path=/api/alerts/**

spring.cloud.gateway.routes[4].id=statistics-service
spring.cloud.gateway.routes[4].uri=lb://statistics-service
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/statistics/**
spring.cloud.gateway.routes[4].predicates[1]=Path=/api/reports/**

# SpringDoc OpenAPI Configuration for Gateway
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true

# Enable gateway routing for OpenAPI docs
springdoc.show-actuator=true

# Global CORS Configuration
spring.web.cors.allowed-origins=*
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE
spring.web.cors.allowed-headers=*

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,gateway

# AWS-specific configuration
server.forward-headers-strategy=native
spring.cloud.gateway.x-forwarded.for-enabled=true
spring.cloud.gateway.x-forwarded.host-enabled=true
spring.cloud.gateway.x-forwarded.proto-enabled=true